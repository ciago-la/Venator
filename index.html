<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Altervenator ‚Äî Misiones</title>
  <link rel="manifest" href="manifest.webmanifest">
  <link rel="icon" href="icon-192.png">
  <link rel="apple-touch-icon" href="icon-192.png">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <link rel="stylesheet" href="styles.v10.css">

  <!-- KILL SWITCH SW (1 vez): desregistra cualquier SW y recarga -->
  <script>
  (function(){
    if (!('serviceWorker' in navigator)) return;
    // Para no entrar en bucle: solo ejecuta una vez
    if (!localStorage.getItem('SW_KILL_ONCE')) {
      localStorage.setItem('SW_KILL_ONCE','1');
      navigator.serviceWorker.getRegistrations().then(function(regs){
        var ps = [];
        for (var i=0;i<regs.length;i++) ps.push(regs[i].unregister());
        Promise.all(ps).then(function(){ location.reload(); });
      });
    }
  })();
  </script>
</head>
<body>
  <header class="topbar">
  <div class="brand">ALTERVENATOR</div>
  <div>
    <div id="levelInfo">Lvl 1 ¬∑ 0 / 200 XP ¬∑ 0ü™ô</div>
    <div class="xpwrap"><div class="xpbar"><div id="xpFill" class="xpfill"></div></div></div>
  </div>
</header>


  <main>
    <section id="view-misiones" class="view active">
      <div class="toolbar">
        <button id="newFocusBtn" class="ghost">+ Nueva misi√≥n Focus</button>
        <button id="forceUrgentBtn" class="ghost">‚ö†Ô∏è Forzar Urgente (demo)</button>
      </div>
      <ul id="missionsList" class="cards"></ul>
    </section>

    <section id="view-tienda" class="view">
      <h2>Tienda</h2>
      <h3>Consumibles</h3>
      <ul id="shopConsumibles" class="cards"></ul>
      <h3>Est√©ticos</h3>
      <ul id="shopEsteticos" class="cards"></ul>
      <h3>Inventario</h3>
      <ul id="inventoryList" class="cards"></ul>
    </section>

    <section id="view-perfil" class="view">
      <h2>Perfil</h2>
      <div class="avatar">
        <h3>Perfiles</h3>
<div class="btnrow">
  <input id="profileName" placeholder="Nombre de perfil (p.ej., Amo)" />
  <button id="saveProfileBtn">Guardar perfil</button>
  <button id="loadProfileBtn">Cargar perfil</button>
  <button id="exportProfileBtn" class="ghost">Exportar</button>
  <input id="importProfileInput" type="file" accept="application/json" style="display:none"/>
  <button id="importProfileBtn" class="ghost">Importar</button>
</div>
<div class="small">Perfiles guardados: <span id="profileList"></span></div>

  <div class="model">
    <div class="silhouette"></div>
    <!-- Capas de equipo (SVGs por JS) -->
    <img id="eq_dagas" class="equip dagas" alt="" />
    <img id="eq_arco"  class="equip arco"  alt="" />
    <img id="eq_gafas" class="equip gafas" alt="" />
    <img id="eq_ropa"  class="equip ropa"  alt="" />
  </div>
  <div class="stats">
    <div><strong>Nivel:</strong> <span id="pLvl">1</span> (<span id="pXP">0</span>/<span id="pXPNeed">200</span> XP)</div>
    <div><strong>Monedas:</strong> <span id="pCoins">0</span></div>
    <div><strong>Nerf EXP:</strong> <span id="pNerf">0</span> misiones</div>
    <div><strong>Nivel de clase:</strong> <span id="cLvl">1</span> (<span id="cXP">0</span>/<span id="cXPNeed">200</span> XP)</div>
  </div>
</div>
      <div class="profile">
        <label>Nombre <input id="heroName" placeholder="Amo"></label>
        <label>Clase
          <select id="heroClass"></select>
        </label>
        <label>Zona de suerte (Focus)
          <select id="heroGoal">
            <option value="abdomen">Abdomen</option>
            <option value="brazos">Brazos</option>
            <option value="piernas">Piernas</option>
            <option value="pecho">Pecho</option>
            <option value="espalda">Espalda</option>
            <option value="hombros">Hombros</option>
          </select>
        </label>
        <div class="stats">
          <div><strong>Nivel:</strong> <span id="pLvl">1</span> (<span id="pXP">0</span>/<span id="pXPNeed">200</span> XP)</div>
          <div><strong>Monedas:</strong> <span id="pCoins">0</span></div>
          <div><strong>Nerf EXP:</strong> <span id="pNerf">0</span> misiones</div>
        </div>
        <div class="stats">
          <div><strong>Nivel de clase:</strong> <span id="cLvl">1</span> (<span id="cXP">0</span>/<span id="cXPNeed">200</span> XP)</div>
        </div>
        <button id="resetBtn" class="danger">Reiniciar progreso</button>
      </div>
      <h3>Equipo</h3>
      <ul id="equipList" class="chips"></ul>

      <h3>Creaci√≥n de pruebas/clases</h3>
      <div class="btnrow">
        <button id="createClassBtn">Crear clase personalizada (200ü™ô)</button>
        <button id="createTestBtn">Crear prueba normal (10ü™ô)</button>
        <button id="createEliteBtn">Crear prueba √©lite (50ü™ô)</button>
      </div>
    </section>
  </main>

  <nav class="tabbar">
    <button data-view="misiones" class="active">Misiones</button>
    <button data-view="tienda">Tienda</button>
    <button data-view="perfil">Perfil</button>
  </nav>

  <!-- Overlay / notificaciones -->
  <div id="overlay" class="overlay hidden">
    <div id="overlayCard" class="overlay-card">
      <h3 id="ovTitle">Notificaci√≥n</h3>
      <p id="ovBody"></p>
      <div class="btnrow" id="ovButtons"></div>
    </div>
  </div>

<script src="app.v13s7a.js"></script>


  <!-- Tras matar el SW 1 vez, podemos registrar uno nuevo en el futuro -->
  <script>
    if ('serviceWorker' in navigator) {
      // De momento NO registramos nada para evitar interferencias.
      // Cuando todo funcione, volveremos a activar sw.js si quieres PWA offline.
    }
  </script>
</body>
</html>
